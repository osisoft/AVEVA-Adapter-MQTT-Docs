<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Client settings </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Client settings ">
    <meta name="generator" content="docfx 2.59.1.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../content/index.html" width="46">
                <img id="logo" src="../../content/main/shared-content/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="PIAdapterForMQTTClientSettingsConfiguration">
<h1 id="client-settings">Client settings</h1>

<p>The client settings configuration is automatically generated when a new data source is added. If you experience problems with timeouts or when MQTT limits are exceeded in terms of browse or subscription operation, you can change the client settings configuration.</p>
<h2 id="configure-mqtt-client-settings">Configure MQTT client settings</h2>
<p>Complete the following steps to configure MQTT client settings. Use the <code>PUT</code> method in conjunction with the <code>api/v1/configuration/&lt;ComponentId&gt;/ClientSettings</code> REST endpoint to initialize the configuration.</p>
<ol>
<li><p>Using a text editor, create an empty text file.</p>
</li>
<li><p>Copy and paste an example configuration for MQTT client settings into the file.</p>
<p> For sample JSON, see <a href="#mqtt-client-settings-example">MQTT client settings example</a>.</p>
</li>
<li><p>Update the example JSON parameters for your environment.</p>
<p> For a table of all available parameters, see <a href="#mqtt-client-settings-parameters">MQTT client settings parameters</a>.</p>
</li>
<li><p>Save the file. For example, as <code>ConfigureClientSettings.json</code>.</p>
</li>
<li><p>Open a command line session. Change directory to the location of <code>ConfigureClientSettings.json</code>.</p>
</li>
<li><p>Enter the following cURL command (which uses the <code>PUT</code> method) to initialize the client settings configuration.</p>
<pre><code class="lang-bash">curl -d &quot;@ConfigureClientSettings.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT &quot;http://localhost:5590/api/v1/configuration/MQTT1/ClientSettings&quot;
</code></pre><p> <strong>Notes:</strong></p>
<ul>
<li>If you installed the adapter to listen on a non-default port, update <code>5590</code> to the port number in use.</li>
<li>If you use a component ID other than <code>MQTT1</code>, update the endpoint with your chosen component ID.</li>
<li>For a list of other REST operations you can perform, like updating or deleting a client settings configuration, see <a href="#rest-urls">REST URLs</a>.
<br>
<br></li>
</ul>
</li>
</ol>
<h2 id="mqtt-client-settings-schema">MQTT client settings schema</h2>
<p>The full schema definition for the MQTT client settings configuration is in the <code>MQTT_ClientSettings_schema.json</code> file located in one of the following folders:</p>
<p>Windows: <code>%ProgramFiles%\OSIsoft\Adapters\MQTT\Schemas</code></p>
<p>Linux: <code>/opt/OSIsoft/Adapters/MQTT/Schemas</code></p>
<h2 id="mqtt-client-settings-parameters">MQTT client settings parameters</h2>
<p>The following parameters are available for configuring MQTT client settings:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>KeepAlivePeriod</strong></td>
<td>Optional</td>
<td><code>string</code><br>(timespan)</td>
<td>The maximum time that can elapse between sending two data items. <br><br> Allowed value: &gt;= <code>00:00:05</code> (5 seconds)<br>Default value: <code>00:00:30</code> (30 seconds)</td>
</tr>
<tr>
<td><strong>QosLevel</strong></td>
<td>Optional</td>
<td><code>integer</code><br><br>or<br><br><code>enum</code></td>
<td>Defines the guarantee of delivery for a specific item.<br><br> Allowed value:<br><code>0</code> or <code>AtMostOnce</code>: There is no guarantee of item delivery <br><code>1</code> or <code>AtLeastOnce</code>: An item is delivered at least one time<br><code>2</code> or <code>ExactlyOnce</code>: Each item is received only one time.<br>Default value: <code>2</code></td>
</tr>
<tr>
<td><strong>MaxClientQueueSize</strong></td>
<td>Optional</td>
<td><code>integer</code></td>
<td>Maximum number of items that can be in the adapter internal queue. <br><br>Allowed value: &gt;= <code>250</code><br>Default value: <code>1000</code></td>
</tr>
</tbody>
</table>
<h2 id="mqtt-client-settings-example">MQTT client settings example</h2>
<pre><code class="lang-json">{
    &quot;keepAlivePeriod&quot;: &quot;0:00:30&quot;,
    &quot;qosLevel&quot;: 2,
    &quot;maxClientQueueSize&quot;: 1000
}
</code></pre><h2 id="rest-urls">REST URLs</h2>
<table>
<thead>
<tr>
<th>Relative URL</th>
<th>HTTP verb</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>api/v1/configuration/<em>ComponentId</em>/ClientSettings</td>
<td>GET</td>
<td>Retrieves the MQTT client settings configuration</td>
</tr>
<tr>
<td>api/v1/configuration/<em>ComponentId</em>/ClientSettings</td>
<td>PUT</td>
<td>Configures or updates the MQTT client settings  configuration</td>
</tr>
<tr>
<td>api/v1/configuration/<em>ComponentId</em>/ClientSettings</td>
<td>DELETE</td>
<td>Deletes the MQTT client settings  configuration</td>
</tr>
<tr>
<td>api/v1/configuration/<em>ComponentId</em>/ClientSettings</td>
<td>PATCH</td>
<td>Allows partial updating of configured client settings fields.</td>
</tr>
</tbody>
</table>
<p><strong>Note:</strong> Replace <em>ComponentId</em> with the Id of your MQTT component, for example MQTT1.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/PI-Adapter-MQTT-Docs/blob/main/content/configuration/client-settings.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span><a href="https://www.osisoft.com/copyright/">© 2019 - 2021 OSIsoft, LLC. All rights reserved.</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
